/* ===========================================
   正解時エフェクト用CSS
   財務会計学習サイト
=========================================== */

/* オーバーレイ基本スタイル */
.correct-effect-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.correct-effect-overlay.fade-out {
    animation: fadeOut 0.5s ease-out forwards;
}

@keyframes fadeOut {
    to {
        opacity: 0;
    }
}

/* ===========================================
   メッセージ表示スタイル
=========================================== */

.effect-message {
    font-size: clamp(1.5rem, 5vw, 3rem);
    font-weight: 900;
    text-align: center;
    z-index: 10001;
    padding: 1rem 2rem;
    border-radius: 20px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

/* バウンスアニメーション */
.effect-bounce {
    background: linear-gradient(135deg, #6bcb77 0%, #4d96ff 100%);
    color: white;
    animation: messageBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes messageBounce {
    0% {
        transform: scale(0) rotate(-10deg);
        opacity: 0;
    }

    50% {
        transform: scale(1.2) rotate(5deg);
    }

    100% {
        transform: scale(1) rotate(0);
        opacity: 1;
    }
}

/* グロー（発光）アニメーション */
.effect-glow {
    background: linear-gradient(135deg, #ff6b6b 0%, #ffd93d 100%);
    color: white;
    animation: messageGlow 0.8s ease-out;
    box-shadow: 0 0 30px rgba(255, 107, 107, 0.6), 0 0 60px rgba(255, 217, 61, 0.4);
}

@keyframes messageGlow {
    0% {
        transform: scale(0.5);
        opacity: 0;
        filter: brightness(2);
    }

    50% {
        filter: brightness(1.5);
    }

    100% {
        transform: scale(1);
        opacity: 1;
        filter: brightness(1);
    }
}

/* キラキラアニメーション */
.effect-sparkle {
    background: linear-gradient(135deg, #845ec2 0%, #ff6f91 100%);
    color: white;
    animation: messageSparkle 0.7s ease-out;
}

@keyframes messageSparkle {
    0% {
        transform: scale(0) rotate(180deg);
        opacity: 0;
    }

    100% {
        transform: scale(1) rotate(0);
        opacity: 1;
    }
}

/* ゴールド */
.effect-golden {
    background: linear-gradient(135deg, #f7d44c 0%, #eb9c00 100%);
    color: #5d4037;
    animation: messageGolden 0.6s ease-out;
    box-shadow: 0 0 20px rgba(247, 212, 76, 0.8);
}

@keyframes messageGolden {
    0% {
        transform: translateY(-50px) scale(0.5);
        opacity: 0;
    }

    100% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
}

/* レインボー */
.effect-rainbow {
    background: linear-gradient(90deg,
            #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
    background-size: 400% 100%;
    color: white;
    animation: messageRainbow 0.8s ease-out, rainbowShift 2s linear infinite;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

@keyframes messageRainbow {
    0% {
        transform: scale(0);
        opacity: 0;
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes rainbowShift {
    0% {
        background-position: 0% 50%;
    }

    100% {
        background-position: 400% 50%;
    }
}

/* ===========================================
   大きなテキストエフェクト
=========================================== */

.effect-big-text {
    font-size: clamp(2rem, 8vw, 5rem);
    font-weight: 900;
    text-align: center;
    animation: bigTextPop 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.effect-text-normal {
    color: #4d96ff;
    text-shadow: 3px 3px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff;
}

.effect-text-great {
    background: linear-gradient(135deg, #ff6b6b, #ffd93d, #6bcb77);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(3px 3px 0 #333);
}

.effect-text-legendary {
    background: linear-gradient(90deg, #f7d44c, #ffeb3b, #ffc107, #ff9800, #f7d44c);
    background-size: 200% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: bigTextPop 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275),
        legendaryShine 1s linear infinite;
    filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
}

@keyframes bigTextPop {
    0% {
        transform: scale(0) rotate(-15deg);
        opacity: 0;
    }

    60% {
        transform: scale(1.3) rotate(5deg);
    }

    100% {
        transform: scale(1) rotate(0);
        opacity: 1;
    }
}

@keyframes legendaryShine {
    0% {
        background-position: 200% 0;
    }

    100% {
        background-position: -200% 0;
    }
}

/* ===========================================
   紙吹雪エフェクト
=========================================== */

.confetti-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.confetti-piece {
    position: absolute;
    top: -20px;
    width: 10px;
    height: 20px;
    border-radius: 2px;
    animation: confettiFall 1.5s ease-out forwards;
}

@keyframes confettiFall {
    0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
    }

    100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
    }
}

/* ===========================================
   花火エフェクト
=========================================== */

.fireworks-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.firework-spark {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    animation: fireworkExplode 0.8s ease-out forwards;
}

@keyframes fireworkExplode {
    0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }

    100% {
        transform:
            translate(calc(cos(var(--angle)) * 100px),
                calc(sin(var(--angle)) * 100px)) scale(0);
        opacity: 0;
    }
}

/* ===========================================
   星エフェクト
=========================================== */

.stars-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.star-piece {
    position: absolute;
    animation: starTwinkle 1s ease-out;
}

@keyframes starTwinkle {
    0% {
        transform: scale(0) rotate(0deg);
        opacity: 0;
    }

    50% {
        transform: scale(1.5) rotate(180deg);
        opacity: 1;
    }

    100% {
        transform: scale(0.5) rotate(360deg);
        opacity: 0;
    }
}

/* ===========================================
   コインエフェクト
=========================================== */

.coins-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.coin-piece {
    position: absolute;
    top: -50px;
    animation: coinFall 1.2s ease-in forwards;
}

@keyframes coinFall {
    0% {
        transform: translateY(0) rotateY(0deg);
        opacity: 1;
    }

    100% {
        transform: translateY(100vh) rotateY(1440deg);
        opacity: 0;
    }
}

/* ===========================================
   絵文字シャワーエフェクト
=========================================== */

.emoji-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.emoji-piece {
    position: absolute;
    top: -50px;
    animation: emojiFall 1.3s ease-out forwards;
}

@keyframes emojiFall {
    0% {
        transform: translateY(0) rotate(0deg) scale(0);
        opacity: 0;
    }

    20% {
        transform: scale(1);
        opacity: 1;
    }

    100% {
        transform: translateY(100vh) rotate(360deg) scale(0.5);
        opacity: 0;
    }
}

/* ===========================================
   レジェンダリーエフェクト
=========================================== */

.legendary-container {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.legendary-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center,
            rgba(255, 215, 0, 0.3) 0%,
            rgba(255, 165, 0, 0.2) 30%,
            transparent 70%);
    animation: legendaryPulse 0.5s ease-out;
}

@keyframes legendaryPulse {
    0% {
        transform: scale(0);
        opacity: 0;
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.legendary-message {
    font-size: clamp(2rem, 10vw, 4rem);
    font-weight: 900;
    background: linear-gradient(90deg, #ffd700, #ffec8b, #ffd700);
    background-size: 200% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: legendaryText 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275),
        legendaryShine 1s linear infinite;
    text-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
    filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
    z-index: 10002;
}

@keyframes legendaryText {
    0% {
        transform: scale(0) rotate(-180deg);
    }

    60% {
        transform: scale(1.5) rotate(10deg);
    }

    100% {
        transform: scale(1) rotate(0);
    }
}

.legendary-streak {
    font-size: clamp(1.2rem, 4vw, 2rem);
    font-weight: 700;
    color: #fff;
    background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
    padding: 0.5rem 1.5rem;
    border-radius: 30px;
    margin-top: 1rem;
    animation: streakBadge 0.6s ease-out 0.3s backwards;
    z-index: 10002;
}

@keyframes streakBadge {
    0% {
        transform: scale(0) translateY(30px);
        opacity: 0;
    }

    100% {
        transform: scale(1) translateY(0);
        opacity: 1;
    }
}

.legendary-particles {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.legendary-particle {
    position: absolute;
    top: -30px;
    animation: legendaryParticleFall 1.5s ease-out forwards;
}

@keyframes legendaryParticleFall {
    0% {
        transform: translateY(0) rotate(0deg) scale(0);
        opacity: 0;
    }

    10% {
        transform: scale(1);
        opacity: 1;
    }

    100% {
        transform: translateY(100vh) rotate(720deg) scale(0.3);
        opacity: 0;
    }
}

/* ===========================================
   画面シェイク（オプション）
=========================================== */

@keyframes screenShake {

    0%,
    100% {
        transform: translateX(0);
    }

    10%,
    30%,
    50%,
    70%,
    90% {
        transform: translateX(-5px);
    }

    20%,
    40%,
    60%,
    80% {
        transform: translateX(5px);
    }
}

.screen-shake {
    animation: screenShake 0.3s ease-in-out;
}

/* ===========================================
   モバイル対応
=========================================== */

@media (max-width: 768px) {
    .effect-message {
        font-size: clamp(1.2rem, 6vw, 2rem);
        padding: 0.8rem 1.5rem;
    }

    .effect-big-text {
        font-size: clamp(1.5rem, 10vw, 3rem);
    }

    .legendary-message {
        font-size: clamp(1.5rem, 12vw, 2.5rem);
    }

    .confetti-piece,
    .coin-piece,
    .emoji-piece,
    .legendary-particle {
        animation-duration: 1s;
    }
}