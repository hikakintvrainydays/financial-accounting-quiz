<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>財務会計総論 定期試験対策 | Learn Your Way</title>
    <meta name="description" content="財務会計総論の定期試験対策用学習サイト。クイズ、フラッシュカード、穴埋め、計算ドリルの4モードで完全暗記！">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="effects.css">
    <link rel="stylesheet" href="minigame.css">
</head>

<body>
    <!-- ローディング画面 -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">📊</div>
            <h1 class="loading-title">財務会計総論</h1>
            <p class="loading-subtitle">定期試験対策サイト</p>
            <div class="loading-bar">
                <div class="loading-bar-fill"></div>
            </div>
        </div>
    </div>

    <!-- メインアプリケーション -->
    <div id="app" class="app hidden">
        <!-- ヘッダー -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <span class="logo-icon">📊</span>
                    <h1 class="site-title">財務会計総論</h1>
                </div>
                <div class="header-actions">
                    <button id="theme-toggle" class="icon-btn" title="テーマ切替">
                        <span class="theme-icon">🌙</span>
                    </button>
                    <button id="stats-btn" class="icon-btn" title="進捗">
                        <span>📈</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- メインコンテンツ -->
        <main class="main-content">
            <!-- ホーム画面 -->
            <section id="home-screen" class="screen active">
                <div class="hero-section">
                    <div class="hero-badge">2025年度 秋学期</div>
                    <h2 class="hero-title">定期試験対策</h2>
                    <p class="hero-subtitle">キャッシュ・フロー計算書、有価証券評価、収益認識基準など<br>全6章を完全マスター</p>
                </div>

                <!-- 進捗サマリー -->
                <div class="progress-summary">
                    <div class="progress-card">
                        <span class="progress-icon">🎯</span>
                        <div class="progress-info">
                            <span class="progress-value" id="total-solved">0</span>
                            <span class="progress-label">問題回答</span>
                        </div>
                    </div>
                    <div class="progress-card">
                        <span class="progress-icon">⚡</span>
                        <div class="progress-info">
                            <span class="progress-value" id="accuracy-rate">0%</span>
                            <span class="progress-label">正答率</span>
                        </div>
                    </div>
                    <div class="progress-card">
                        <span class="progress-icon">🔥</span>
                        <div class="progress-info">
                            <span class="progress-value" id="streak-count">0</span>
                            <span class="progress-label">連続日数</span>
                        </div>
                    </div>
                </div>

                <!-- 学習モード選択 -->
                <div class="mode-section">
                    <h3 class="section-title">学習モードを選択</h3>
                    <div class="mode-grid">
                        <button class="mode-card" data-mode="quiz">
                            <span class="mode-icon">🎮</span>
                            <span class="mode-title">クイズバトル</span>
                            <span class="mode-desc">4択問題でスコアアタック</span>
                        </button>
                        <button class="mode-card" data-mode="flashcard">
                            <span class="mode-icon">📇</span>
                            <span class="mode-title">フラッシュカード</span>
                            <span class="mode-desc">用語・英語をサクサク暗記</span>
                        </button>
                        <button class="mode-card" data-mode="fill-blank">
                            <span class="mode-icon">✍️</span>
                            <span class="mode-title">穴埋め特訓</span>
                            <span class="mode-desc">実際に入力して覚える</span>
                        </button>
                        <button class="mode-card" data-mode="calculation">
                            <span class="mode-icon">🧮</span>
                            <span class="mode-title">計算ドリル</span>
                            <span class="mode-desc">CF計算・工事進行基準</span>
                        </button>
                        <button class="mode-card" data-mode="essay">
                            <span class="mode-icon">📝</span>
                            <span class="mode-title">記述マスター</span>
                            <span class="mode-desc">解説→記述で記述力UP</span>
                        </button>
                    </div>
                </div>

                <!-- 章別学習 -->
                <div class="chapter-section">
                    <h3 class="section-title">章別に学習</h3>
                    <div class="chapter-list" id="chapter-list">
                        <!-- JSで生成 -->
                    </div>
                </div>

                <!-- 試験対策ポイント -->
                <div class="focus-section">
                    <h3 class="section-title">📌 試験出題ポイント</h3>
                    <div class="focus-grid" id="focus-grid">
                        <!-- JSで生成 -->
                    </div>
                </div>
            </section>

            <!-- クイズモード画面 -->
            <section id="quiz-screen" class="screen">
                <div class="quiz-header">
                    <button class="back-btn" data-target="home-screen">← 戻る</button>
                    <div class="quiz-info">
                        <span class="quiz-progress" id="quiz-progress">問題 1/10</span>
                        <!-- 〇✕カウント表示 -->
                        <div class="ox-counter" id="ox-counter">
                            <span class="ox-correct">〇<span id="correct-count">0</span></span>
                            <span class="ox-incorrect">✕<span id="incorrect-count">0</span></span>
                        </div>
                    </div>
                    <div class="quiz-timer" id="quiz-timer">
                        <span class="timer-icon">⏱️</span>
                        <span class="timer-value" id="timer-value">15</span>
                    </div>
                </div>
                <!-- タイムバー（画面下部） -->
                <div class="time-bar-container">
                    <div class="time-bar" id="time-bar"></div>
                </div>
                <div class="quiz-container">
                    <div class="quiz-chapter-badge" id="quiz-chapter-badge">第1章</div>
                    <div class="quiz-question" id="quiz-question">
                        <!-- 問題文 -->
                    </div>
                    <div class="quiz-options" id="quiz-options">
                        <!-- 選択肢 -->
                    </div>
                </div>
                <div class="quiz-feedback hidden" id="quiz-feedback">
                    <div class="feedback-icon" id="feedback-icon">✓</div>
                    <div class="feedback-text" id="feedback-text">正解！</div>
                    <div class="feedback-explanation" id="feedback-explanation"></div>
                    <button class="btn-primary" id="next-question-btn">次の問題へ</button>
                </div>
            </section>

            <!-- フラッシュカードモード画面 -->
            <section id="flashcard-screen" class="screen">
                <div class="flashcard-header">
                    <button class="back-btn" data-target="home-screen">← 戻る</button>
                    <div class="flashcard-progress" id="flashcard-progress">1 / 10</div>
                </div>
                <div class="flashcard-container">
                    <div class="flashcard" id="flashcard">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">
                                <span class="flashcard-label">英語 / 用語</span>
                                <span class="flashcard-content" id="flashcard-front-content">Recognition</span>
                                <span class="flashcard-hint">タップして裏を見る</span>
                            </div>
                            <div class="flashcard-back">
                                <span class="flashcard-label">日本語 / 意味</span>
                                <span class="flashcard-content" id="flashcard-back-content">認識</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flashcard-actions">
                    <button class="flashcard-btn wrong" id="flashcard-wrong">❌ 覚えてない</button>
                    <button class="flashcard-btn correct" id="flashcard-correct">✓ 覚えた！</button>
                </div>
            </section>

            <!-- 穴埋めモード画面 -->
            <section id="fill-blank-screen" class="screen">
                <div class="fill-header">
                    <button class="back-btn" data-target="home-screen">← 戻る</button>
                    <div class="fill-progress" id="fill-progress">問題 1/10</div>
                </div>
                <div class="fill-container">
                    <div class="fill-chapter-badge" id="fill-chapter-badge">第1章</div>
                    <div class="fill-question" id="fill-question">
                        <!-- 問題文（穴埋め部分はinputになる） -->
                    </div>
                    <div class="fill-hint" id="fill-hint">
                        <span class="hint-icon">💡</span>
                        <span class="hint-text">ヒント: タップで表示</span>
                    </div>
                    <button class="btn-primary" id="fill-submit-btn">回答する</button>
                </div>
                <div class="fill-feedback hidden" id="fill-feedback">
                    <div class="feedback-icon" id="fill-feedback-icon">✓</div>
                    <div class="feedback-text" id="fill-feedback-text">正解！</div>
                    <div class="correct-answers" id="correct-answers">
                        <!-- 正解表示 -->
                    </div>
                    <button class="btn-primary" id="fill-next-btn">次の問題へ</button>
                </div>
            </section>

            <!-- 計算ドリルモード画面 -->
            <section id="calculation-screen" class="screen">
                <div class="calc-header">
                    <button class="back-btn" data-target="home-screen">← 戻る</button>
                    <div class="calc-progress" id="calc-progress">問題 1/5</div>
                </div>
                <div class="calc-container">
                    <div class="calc-chapter-badge" id="calc-chapter-badge">第5章</div>
                    <div class="calc-question" id="calc-question">
                        <!-- 問題文 -->
                    </div>
                    <div class="calc-formula" id="calc-formula">
                        <!-- 公式 -->
                    </div>
                    <div class="calc-input-group">
                        <input type="number" class="calc-input" id="calc-answer" placeholder="答えを入力">
                        <span class="calc-unit" id="calc-unit">万円</span>
                    </div>
                    <button class="btn-primary" id="calc-submit-btn">回答する</button>
                </div>
                <div class="calc-feedback hidden" id="calc-feedback">
                    <div class="feedback-icon" id="calc-feedback-icon">✓</div>
                    <div class="feedback-text" id="calc-feedback-text">正解！</div>
                    <div class="calc-explanation" id="calc-explanation"></div>
                    <button class="btn-primary" id="calc-next-btn">次の問題へ</button>
                </div>
            </section>

            <!-- 統計画面 -->
            <section id="stats-screen" class="screen">
                <div class="stats-header">
                    <button class="back-btn" data-target="home-screen">← 戻る</button>
                    <h2 class="stats-title">📊 学習進捗</h2>
                </div>
                <div class="stats-container">
                    <div class="stats-overview">
                        <div class="stat-big-card">
                            <span class="stat-big-value" id="stat-total-answered">0</span>
                            <span class="stat-big-label">総回答数</span>
                        </div>
                        <div class="stat-big-card">
                            <span class="stat-big-value" id="stat-overall-accuracy">0%</span>
                            <span class="stat-big-label">総合正答率</span>
                        </div>
                    </div>
                    <div class="stats-chapters">
                        <h3 class="stats-section-title">章別正答率</h3>
                        <div class="chapter-stats-list" id="chapter-stats-list">
                            <!-- JSで生成 -->
                        </div>
                    </div>
                    <div class="stats-weak">
                        <h3 class="stats-section-title">🎯 苦手問題</h3>
                        <div class="weak-list" id="weak-list">
                            <!-- JSで生成 -->
                        </div>
                    </div>
                    <button class="btn-danger" id="reset-stats-btn">📛 データをリセット</button>
                </div>
            </section>

            <!-- 結果画面 -->
            <section id="result-screen" class="screen">
                <div class="result-container">
                    <div class="result-header">
                        <span class="result-emoji" id="result-emoji">🎉</span>
                        <h2 class="result-title" id="result-title">お疲れ様でした！</h2>
                    </div>
                    <div class="result-score">
                        <span class="result-score-value" id="result-score-value">8</span>
                        <span class="result-score-divider">/</span>
                        <span class="result-score-total" id="result-score-total">10</span>
                    </div>
                    <div class="result-stats">
                        <div class="result-stat">
                            <span class="result-stat-label">正答率</span>
                            <span class="result-stat-value" id="result-accuracy">80%</span>
                        </div>
                        <div class="result-stat">
                            <span class="result-stat-label">所要時間</span>
                            <span class="result-stat-value" id="result-time">2:30</span>
                        </div>
                    </div>

                    <!-- Glows & Grows フィードバック -->
                    <div class="glows-grows">
                        <div class="glow-section">
                            <h3 class="gg-title">✨ Glows（良い点）</h3>
                            <ul class="gg-list" id="glows-list">
                                <!-- JSで生成 -->
                            </ul>
                        </div>
                        <div class="grow-section">
                            <h3 class="gg-title">🌱 Grows（改善点）</h3>
                            <ul class="gg-list" id="grows-list">
                                <!-- JSで生成 -->
                            </ul>
                        </div>
                    </div>

                    <div class="result-actions">
                        <button class="btn-secondary" id="retry-btn">もう一度</button>
                        <button class="btn-primary" id="back-home-btn">ホームへ</button>
                    </div>
                </div>
            </section>
            <!-- 論述記述マスター画面 -->
            <section id="essay-screen" class="screen">
                <div class="essay-header">
                    <button class="back-btn" data-target="home-screen">← 戻る</button>
                    <div class="essay-progress" id="essay-progress">テーマ 1/6</div>
                </div>

                <div class="essay-container">
                    <div class="essay-title-badge" id="essay-category-badge">第1章</div>
                    <h2 class="essay-theme-title" id="essay-title">財務会計の機能</h2>

                    <!-- Step 1: 楽しく解説 (Lecture) -->
                    <div id="essay-step-lecture" class="essay-step active">
                        <div class="lecture-bubble-container" id="lecture-container">
                            <!-- 会話形式の解説がここに挿入される -->
                        </div>
                        <div class="essay-actions">
                            <button class="btn-primary" id="to-write-btn">わかった！記述へ進む →</button>
                        </div>
                    </div>

                    <!-- Step 2: 書かせる (Write) -->
                    <div id="essay-step-write" class="essay-step hidden">
                        <div class="essay-question-box">
                            <h3 class="essay-q-label">Q. 論述問題</h3>
                            <p class="essay-q-text" id="essay-question-text">ここに問題文が入ります</p>
                        </div>

                        <div class="essay-input-area">
                            <textarea id="essay-answer-input" placeholder="ここに自分の言葉で説明を書こう（200字以内推奨）"></textarea>
                            <div class="essay-tools">
                                <button class="hint-toggle-btn" id="essay-hint-btn">💡 キーワードヒントを見る</button>
                                <div class="essay-keywords hidden" id="essay-keywords">
                                    <!-- キーワード -->
                                </div>
                            </div>
                        </div>

                        <div class="essay-actions">
                            <button class="btn-secondary" id="back-to-lecture-btn">← 解説に戻る</button>
                            <button class="btn-primary" id="submit-essay-btn">提出して採点</button>
                        </div>
                    </div>

                    <!-- Step 3: 解答・比較 (Result) -->
                    <div id="essay-step-result" class="essay-step hidden">
                        <div class="essay-comparison">
                            <div class="your-answer-box">
                                <h4>あなたの解答</h4>
                                <p id="your-essay-display"></p>
                            </div>
                            <div class="model-answer-box">
                                <h4>模範解答</h4>
                                <p id="model-essay-display"></p>
                            </div>
                        </div>

                        <div class="self-evaluation">
                            <h4>自己採点</h4>
                            <div class="eval-buttons">
                                <button class="eval-btn" data-eval="3">😆 完璧！</button>
                                <button class="eval-btn" data-eval="2">🙂 まあまあ</button>
                                <button class="eval-btn" data-eval="1">🤔 要復習</button>
                            </div>
                        </div>

                        <div class="essay-actions">
                            <button class="btn-primary hidden" id="next-essay-btn">次のテーマへ →</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>


    <!-- 問題数選択モーダル -->
    <div id="question-count-modal" class="modal hidden">
        <div class="modal-content">
            <h3 class="modal-title">📝 問題数を選択</h3>
            <div class="question-count-options">
                <button class="count-btn" data-count="5">5問</button>
                <button class="count-btn" data-count="10">10問</button>
                <button class="count-btn selected" data-count="15">15問</button>
                <button class="count-btn" data-count="20">20問</button>
                <button class="count-btn" data-count="all">全問</button>
            </div>
            <div class="modal-actions">
                <button class="btn-secondary" id="cancel-count-btn">キャンセル</button>
                <button class="btn-primary" id="start-quiz-btn">スタート！</button>
            </div>
        </div>
    </div>

    <script src="data/essay_data.js"></script>
    <script src="data/questions_v2.js"></script>
    <script src="effects.js"></script>
    <script src="sounds.js"></script>
    <script src="minigame.js"></script>
    <script src="app.js"></script>
</body>

</html>